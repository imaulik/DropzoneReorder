<div class="animated fadeIn">
    <div class="view_content">
        <div class="modal-body">
            <form name="userForm" [formGroup]="vesselForm" novalidate (ngSubmit)="SaveVesselDetails()"
                class="login-form" enctype="multipart/form-data">
                <div style="color: red;" *ngIf="errors">{{errors}}</div>
                <div class="m-portlet__body">
                    <div class="m-form__section m-form__section--first">
                        <div class="form-group m-form__group row">
                            <div class="col-lg-12 spaceing custom-upload">
                                <label for="logo">
                                    Feature Image
                                </label>
                                <dropzone #dropzonePicture [message]="'Click or drag images here to upload'"
                                    (error)="onUploadError($event)" (success)="onUploadSuccess($event)"
                                    (addedFile)="onUploadadd($event)" (removedFile)="onUploadRemoved($event)">
                                </dropzone>
                            </div>

                            <div class="col-lg-12 form-group">
                                <mat-form-field>
                                    <input matInput required placeholder="Title" formControlName="title" name="title"
                                        [(ngModel)]="vessel.title">
                                    <mat-error *ngIf="vesselForm.hasError('required', ['title'])">
                                        Title is required
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-lg-12 form-group">
                                <div [ngxSummernote] height="300px" formControlName="description" [spellcheck]="true"
                                    [(ngModel)]="vessel.description"></div>
                            </div>
                            <div class="col-lg-4 form-group">
                                <mat-form-field>
                                    <input matInput placeholder="Year" formControlName="year" name="year"
                                        [(ngModel)]="vessel.year">
                                    <!--<mat-error *ngIf="vesselForm.hasError('required', ['title'])">-->
                                    <!--Title is required-->
                                    <!--</mat-error>-->
                                </mat-form-field>
                            </div>
                            <div class="col-lg-4 form-group">
                                <mat-form-field>
                                    <input matInput placeholder="Make" formControlName="make" name="make"
                                        [(ngModel)]="vessel.make">
                                    <!--<mat-error *ngIf="vesselForm.hasError('required', ['title'])">-->
                                    <!--Title is required-->
                                    <!--</mat-error>-->
                                </mat-form-field>
                            </div>
                            <div class="col-lg-4 form-group">
                                <mat-form-field>
                                    <input matInput placeholder="Model" formControlName="model" name="model"
                                        [(ngModel)]="vessel.model">
                                    <!--<mat-error *ngIf="vesselForm.hasError('required', ['title'])">-->
                                    <!--Title is required-->
                                    <!--</mat-error>-->
                                </mat-form-field>
                            </div>
                            <div class="col-lg-6 form-group">
                                <mat-form-field>
                                    <input matInput placeholder="Location" formControlName="location" name="location"
                                        [(ngModel)]="vessel.location">
                                    <!--<mat-error *ngIf="vesselForm.hasError('required', ['title'])">-->
                                    <!--Title is required-->
                                    <!--</mat-error>-->
                                </mat-form-field>
                            </div>
                            <div class="col-lg-6 form-group">
                                <mat-form-field>
                                    <input matInput placeholder="Co Brokerage" formControlName="co_brokerage"
                                        name="co_brokerage" [(ngModel)]="vessel.co_brokerage">
                                    <!--<mat-error *ngIf="vesselForm.hasError('required', ['title'])">-->
                                    <!--Title is required-->
                                    <!--</mat-error>-->
                                </mat-form-field>
                            </div>
                            <div class="col-lg-4 form-group">
                                <mat-form-field>
                                    <input matInput placeholder="Preview Period" formControlName="preview_period"
                                        name="preview_period" [(ngModel)]="vessel.preview_period">
                                    <!--<mat-error *ngIf="vesselForm.hasError('required', ['title'])">-->
                                    <!--Title is required-->
                                    <!--</mat-error>-->
                                </mat-form-field>
                            </div>
                            <div class="col-lg-4 form-group">
                                <mat-form-field>
                                    <input matInput placeholder="Haul Out" formControlName="haul_out" name="haul_out"
                                        [(ngModel)]="vessel.haul_out">
                                    <!--<mat-error *ngIf="vesselForm.hasError('required', ['title'])">-->
                                    <!--Title is required-->
                                    <!--</mat-error>-->
                                </mat-form-field>
                            </div>
                            <div class="col-lg-4 form-group">
                                <mat-form-field>
                                    <input matInput placeholder="Sea Trial" formControlName="sea_trial" name="sea_trial"
                                        [(ngModel)]="vessel.sea_trial">
                                    <!--<mat-error *ngIf="vesselForm.hasError('required', ['title'])">-->
                                    <!--Title is required-->
                                    <!--</mat-error>-->
                                </mat-form-field>
                            </div>
                            <div class="col-lg-4 form-group">
                                <mat-form-field>
                                    <input matInput placeholder="Loa" formControlName="loa" name="loa"
                                        [(ngModel)]="vessel.loa">
                                    <!--<mat-error *ngIf="vesselForm.hasError('required', ['title'])">-->
                                    <!--Title is required-->
                                    <!--</mat-error>-->
                                </mat-form-field>
                            </div>
                            <div class="col-lg-4 form-group">
                                <mat-form-field>
                                    <input matInput placeholder="Beam" formControlName="beam" name="beam"
                                        [(ngModel)]="vessel.beam">
                                    <!--<mat-error *ngIf="vesselForm.hasError('required', ['title'])">-->
                                    <!--Title is required-->
                                    <!--</mat-error>-->
                                </mat-form-field>
                            </div>
                            <div class="col-lg-4 form-group">
                                <mat-form-field>
                                    <input matInput placeholder="Draft" formControlName="draft" name="draft"
                                        [(ngModel)]="vessel.draft">
                                    <!--<mat-error *ngIf="vesselForm.hasError('required', ['title'])">-->
                                    <!--Title is required-->
                                    <!--</mat-error>-->
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="form-group m-form__group row">
                            <div class="col-lg-12 form-group">
                                <h3>Broker Details :- </h3>
                            </div>
                            <div class="col-lg-6 form-group">
                                <mat-form-field>
                                    <input matInput placeholder="Broker Name" formControlName="broker_name"
                                        name="broker_name" [(ngModel)]="vessel.broker_name">
                                    <!--<mat-error *ngIf="vesselForm.hasError('required', ['title'])">-->
                                    <!--Title is required-->
                                    <!--</mat-error>-->
                                </mat-form-field>
                            </div>
                            <div class="col-lg-6 form-group">
                                <mat-form-field>
                                    <input matInput placeholder="Broker Email" formControlName="broker_email"
                                        name="broker_email" [(ngModel)]="vessel.broker_email">
                                    <!--<mat-error *ngIf="vesselForm.hasError('required', ['title'])">-->
                                    <!--Title is required-->
                                    <!--</mat-error>-->
                                </mat-form-field>
                            </div>
                            <!-- <div class="col-lg-6 form-group">
                                <mat-form-field>
                                    <input matInput placeholder="Buyer Document Agreement"
                                        formControlName="buyer_document_agreement" name="buyer_document_agreement"
                                        [(ngModel)]="vessel.buyer_document_agreement">
                                </mat-form-field>
                            </div> -->
                        </div>
                        <div class="form-group m-form__group row">
                            <div class="col-lg-12 form-group">
                                <h3>Auction Details :-</h3>
                            </div>
                            <div class="col-lg-12 form-group">
                                <mat-form-field>
                                    <textarea rows="3" matInput placeholder="Auction Address"
                                        formControlName="auction_address" name="auction_address"
                                        [(ngModel)]="vessel.auction_address"></textarea>
                                    <!--<mat-error *ngIf="vesselForm.hasError('required', ['title'])">-->
                                    <!--Title is required-->
                                    <!--</mat-error>-->
                                </mat-form-field>
                            </div>
                            <div class="col-lg-6 form-group">
                                <mat-form-field>
                                    <input matInput required placeholder="Auction Start Price ($)"
                                        formControlName="auction_start_price" name="auction_start_price"
                                        [(ngModel)]="vessel.auction_start_price">
                                    <mat-error *ngIf="vesselForm.hasError('required', ['auction_start_price'])">
                                        Auction Start Price is required
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-lg-6 form-group">
                                <mat-form-field>
                                    <input matInput placeholder="Auction Quantity" formControlName="auction_quantity"
                                        name="auction_quantity" [(ngModel)]="vessel.auction_quantity">
                                    <!--<mat-error *ngIf="vesselForm.hasError('required', ['title'])">-->
                                    <!--Title is required-->
                                    <!--</mat-error>-->
                                </mat-form-field>
                            </div>
                            <div class="col-lg-6 form-group">
                                <mat-form-field>
                                    <input matInput placeholder="Auction Reserve Price ($)"
                                        formControlName="auction_reserve_price" name="auction_reserve_price"
                                        [(ngModel)]="vessel.auction_reserve_price">
                                    <!--<mat-error *ngIf="vesselForm.hasError('required', ['title'])">-->
                                    <!--Title is required-->
                                    <!--</mat-error>-->
                                </mat-form-field>
                            </div>
                            <div class="col-lg-6 form-group">
                                <mat-form-field>
                                    <input matInput placeholder="Auction Buy Now Price ($)"
                                        formControlName="auction_buy_now_price" name="auction_buy_now_price"
                                        [(ngModel)]="vessel.auction_buy_now_price">
                                    <!--<mat-error *ngIf="vesselForm.hasError('required', ['title'])">-->
                                    <!--Title is required-->
                                    <!--</mat-error>-->
                                </mat-form-field>
                            </div>

                            <div class="col-lg-6 form-group">
                                <mat-form-field>
                                    <input matInput placeholder="Incremental Bid ($)" formControlName="incremental_bid"
                                        name="incremental_bid" [(ngModel)]="vessel.incremental_bid">
                                    <!--<mat-error *ngIf="vesselForm.hasError('required', ['title'])">-->
                                    <!--Title is required-->
                                    <!--</mat-error>-->
                                </mat-form-field>
                            </div>
                            <div class="col-lg-6 form-group">
                                <mat-form-field>
                                    <input matInput placeholder="Deposit Amount ($)" formControlName="deposit_amount"
                                        name="deposit_amount" [(ngModel)]="vessel.deposit_amount">
                                    <!--<mat-error *ngIf="vesselForm.hasError('required', ['title'])">-->
                                    <!--Title is required-->
                                    <!--</mat-error>-->
                                </mat-form-field>
                            </div>
                            <div class="col-lg-6 form-group">
                                <mat-form-field>
                                    <input matInput placeholder="Biddders Agreement"
                                           formControlName="bidders_agreement" name="bidders_agreement"
                                           [(ngModel)]="vessel.bidders_agreement">
                                </mat-form-field>
                            </div>
                            <div class="col-lg-6 form-group">
                                <mat-form-field>
                                    <input matInput placeholder="Opening Bid Incentive"
                                           formControlName="opening_bid_incentive" name="opening_bid_incentive"
                                           [(ngModel)]="vessel.opening_bid_incentive">
                                </mat-form-field>
                            </div>
                            <div class="col-lg-6 form-group">
                                <input [owlDateTimeTrigger]="picker" [owlDateTime]="picker"
                                    formControlName="auction_begins" name="auction_begins" placeholder="Auction Begins"
                                    [(ngModel)]="vessel.auction_begins">
                                <owl-date-time #picker></owl-date-time>
                            </div>
                            <div class="col-lg-6 form-group">
                                <input [owlDateTimeTrigger]="pickerTo" [owlDateTime]="pickerTo"
                                    formControlName="auction_ends" name="auction_ends" placeholder="Auction Ends"
                                    [(ngModel)]="vessel.auction_ends">
                                <owl-date-time #pickerTo></owl-date-time>
                            </div>
                        </div>
                        <div class="form-group m-form__group row">
                            <div class="col-lg-6 form-group">
                                <mat-checkbox formControlName="auction_feature" name="auction_feature"
                                    [(ngModel)]="vessel.auction_feature">
                                    Auction Feature
                                </mat-checkbox>
                            </div>
                            <div class="col-lg-6 form-group">
                                <mat-checkbox formControlName="allowed_comment" name="allowed_comment"
                                    [(ngModel)]="vessel.allowed_comment">
                                    Allowed Comment
                                </mat-checkbox>
                            </div>
                        </div>
                        <div class="form-group m-form__group row">
                            <div class="col-lg-12 form-group">
                                <h3>Vessel Additional Fields :-</h3>
                            </div>
                            <div class="col-lg-12 form-group">
                                <div formArrayName="vessel_additional_fields"
                                    class="col-lg-12 row form-group justify-content-between align-items-center"
                                    *ngFor="let vessel_additional_field of vesselForm.get('vessel_additional_fields')['controls']; let i = index;">
                                    <div class="col-lg-5" [formGroupName]="i">
                                        <mat-form-field class="input-style">
                                            <input type="hidden" [(ngModel)]="vessel_additional_field.field_filename"
                                                name="field_filename" formControlName="field_filename"
                                                placeholder="Additional Field Title">
                                            <input matInput required [(ngModel)]="vessel_additional_field.title"
                                                name="title" formControlName="title"
                                                placeholder="Additional Field Title">
                                            <mat-error *ngIf="vesselForm.hasError('required', ['title'])">
                                                Title is required
                                            </mat-error>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-lg-5" [formGroupName]="i"
                                        *ngIf="vessel_additional_field.field_filename == null || vessel_additional_field.field_filename == ''">
                                        <input type="file" [(ngModel)]="vessel_additional_field.upload_file"
                                            name="upload_file" formControlName="upload_file"
                                            (change)="detectFiles($event.target.files, i)" accept="application/pdf">
                                    </div>
                                    <div class="col-lg-5" [formGroupName]="i"
                                        *ngIf="vessel_additional_field.field_filename != '' && vessel_additional_field.field_filename != null">
                                        <span><b>FILE LINK :- </b></span>
                                        <a target="_blank"
                                            href="{{FILE_URL}}{{vessel_additional_field.field_filename}}">{{vessel_additional_field.field_filename}}</a><br>
                                        <a (click)="RemoveFile(i)">Remove File</a>
                                    </div>
                                    <div class="col-lg-2">
                                        <button class=""
                                            *ngIf="vesselForm.get('vessel_additional_fields')['controls'].length != 1"
                                            type="button"
                                            (click)="removeAdditionalFields(i, vesselForm.get('vessel_additional_fields')['controls'][i].get('id').value)"><i
                                                class="fa fa-remove"></i></button>
                                    </div>
                                </div>
                                <div class="col-lg-12 form-group">
                                    <button type="button" (click)="addAdditionalFields()">
                                        <i class="fa fa-plus"></i>
                                    </button>
                                    <span>Add Additional Field</span>
                                </div>
                            </div>
                        </div>
                        <div class="form-group m-form__group row">
                            <div class="col-lg-12 form-group">
                                <h3>Auction Gallery :-</h3>
                            </div>
                            <div class="col-lg-12 form-group gallery_dropzone_upload">
                                <dropzone #dropzoneGallery class="gallery_dropzone"
                                    [message]="'Click or drag images here to upload'"
                                    (error)="onUploadErrorGalllery($event)" (success)="onUploadSuccessGalllery($event)"
                                    (addedFile)="onUploadaddGalllery($event)"
                                    (removedFile)="onUploadRemovedGalllery($event)">
                                </dropzone>
                            </div>


                            <!--<div class="custom-dropzone" ngx-dropzone [accept]="'image/*'" (change)="onSelect($event)" #drop>-->
                                <!--<ngx-dropzone-label>-->
                                    <!--<div>-->
                                        <!--<h2>My custom dropzone</h2>-->
                                    <!--</div>-->
                                <!--</ngx-dropzone-label>-->
                                <!--<ngx-dropzone-image-preview ngProjectAs="ngx-dropzone-preview" *ngFor="let f of files" [file]="f" [removable]="true"-->
                                                            <!--(removed)="onRemove(f)">-->
                                    <!--<ngx-dropzone-label>{{ f.name }} ({{ f.type }})</ngx-dropzone-label>-->
                                <!--</ngx-dropzone-image-preview>-->
                            <!--</div>-->
                            <!--<button (click)="drop.showFileSelector()" class="btn btn-outline-primary">Upload</button>-->

                            <!--<div class="box">-->
                                <!--<h3>Example</h3>-->
                                <!--<div cdkDropList-->
                                     <!--[cdkDropListData]="files"-->
                                     <!--(cdkDropListSorted)="dropped($event)">-->
                                    <!--<ngx-dropzone-image-preview-->
                                            <!--ngProjectAs="ngx-dropzone-preview"-->
                                            <!--*ngFor="let f of files" [file]="f" cdkDrag [cdkDragData]="files">-->
                                        <!--<ngx-dropzone-label *cdkDragPreview>({{ f.type }}) </ngx-dropzone-label>-->
                                    <!--</ngx-dropzone-image-preview>-->
                                <!--</div>-->
                            <!--</div>-->

                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <button type="submit" mat-raised-button color="accent" class="submit-button"
                                aria-label="SAVE" [disabled]="vesselForm.invalid">
                                SAVE
                            </button>
                            <button type="button" mat-raised-button color="accent" class="submit-button"
                                aria-label="CANCEL" (click)="cancel()">
                                CANCEL
                            </button>
                        </div>
                    </div>
                </div>
            </form>
        </div>

    </div>

</div>

<style>
    .view_content {
        background-color: #fff;
        padding: 10px;
    }

    dropzone.gallery_dropzone {
        width: 800px !important;
    }
</style>